import{d as b,e as h,f as P,r as c,j as e,L as C,l as E}from"./index-DYQH2SRP.js";import{R}from"./react-paginate-ClN8rg0Z.js";import{S as $,u as F,P as k}from"./Sorting-bjzJtOrC.js";function V(){const{id:m}=b(),{data:a}=h(`https://ecommerce.routemisr.com/api/v1/categories/${m}`,`getSpecificCategories${m}`),{data:l,isLoading:f}=P("https://ecommerce.routemisr.com/api/v1/products","allProducts"),{data:n}=h(`https://ecommerce.routemisr.com/api/v1/categories/${m}/subcategories`,`getSpecificSubCategories${m}`),[p,g]=c.useState([]),{handleSorting:u}=F(),[x,j]=c.useState("default"),[t,v]=c.useState([]);c.useEffect(()=>{if(l!=null&&l.length&&(a!=null&&a.name)){const s=l.filter(i=>{var o;return((o=i.category)==null?void 0:o.name)===a.name});g(s)}},[l,a]),c.useEffect(()=>{const s=u([...p],x);v(s)},[p,x]);function S({itemsPerPage:s}){const[i,o]=c.useState(0),N=i+s,d=t==null?void 0:t.slice(i,N),w=Math.ceil((t==null?void 0:t.length)/s),L=r=>{const O=r.selected*s%(t==null?void 0:t.length);o(O)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap justify-center items-center",children:d==null?void 0:d.map(r=>r.category.name==(a==null?void 0:a.name)&&e.jsx(k,{product:r},r.id))}),e.jsx(R,{breakLabel:"...",nextLabel:"next >",onPageChange:L,pageRangeDisplayed:5,pageCount:w,previousLabel:"< previous",renderOnZeroPageCount:null,containerClassName:"pagination",activeClassName:"active"})]})}return e.jsx(e.Fragment,{children:f?e.jsx(C,{}):e.jsx(e.Fragment,{children:e.jsxs("section",{className:"pt-20",children:[e.jsxs("div",{className:"text-center text-[12px] md:text-sm text-white bg-[#4A4947] p-8 md:p-24 pt-12",children:[n==null?void 0:n.map((s,i)=>e.jsxs("span",{children:[s==null?void 0:s.name,i!==(n==null?void 0:n.length)-1&&" / "]},s._id)),e.jsx("h2",{className:"text-3xl md:text-5xl text-center font-semibold mt-5",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-[12px] md:text-sm pt-8",children:"*Orders processed in up to 3 business days. Actual delivery times will vary."})]}),e.jsxs("div",{className:"container pt-12",children:[e.jsx($,{sortValue:x,setSortValue:j}),t!=null&&t.length?e.jsx(S,{itemsPerPage:8}):e.jsxs("div",{className:"flex flex-col items-center pt-12",children:[e.jsx("img",{src:E,alt:"",width:500,className:"p-12"}),e.jsx("p",{className:"text-xl md:text-xl lg:text-2xl text-center mb-5 md:mb-2",children:"Weâ€™re sorry, but the products in this category are unavailable right now."}),e.jsx("p",{className:"md:text-lg text-gray-600 text-center",children:"In the meantime, feel free to explore other categories or reach out to us for more help"})]})]})]})})})}export{V as default};
