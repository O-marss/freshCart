import{f as L,u as R,j as s,y as c,a as k,z as I}from"./index-C0o9T5AH.js";const W="_product_1tv3n_1",P="_add_favorite_icon_1tv3n_23",D="_delete_favorite_icon_1tv3n_51",$="_card_add_1tv3n_79",h={product:W,add_favorite_icon:P,delete_favorite_icon:D,card_add:$};function E({product:e}){var d,j,o,g;const l=localStorage.getItem("userToken"),{wishListResponse:t,addToWishListResponse:n,deleteFromWishListResponse:a}=L(),{cartResponse:v,addResponse:_,deleteResponse:b}=R(),{data:m}=v,{mutate:N}=_,{mutate:y}=b,{data:x}=t,{mutate:A}=a,{mutate:C}=n,r=i=>{C({productId:i})},w=i=>{A({productId:i})},S=i=>{N({productId:i})},F=i=>{y({productId:i})};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"w-1/2 md:w-4/12 lg:w-3/12 p-2 md:p-4 lg:p-2 !pt-4 ",children:s.jsxs("div",{className:`${h.product} pb-2 border border-zinc-200 rounded-2xl overflow-hidden h-[355px] md:h-[420px] lg:h-[460px]`,children:[l&&(x==null?void 0:x.data.length)>0?s.jsx("button",{onClick:()=>x!=null&&x.data.some(i=>i.id===(e==null?void 0:e.id))?w(e==null?void 0:e.id):r(e==null?void 0:e.id),children:s.jsx(c,{className:`${x!=null&&x.data.some(i=>i.id===(e==null?void 0:e.id))?h.delete_favorite_icon:h.add_favorite_icon} text-2xl md:text-xl`})}):s.jsx("button",{onClick:()=>r(e==null?void 0:e.id),children:s.jsx(c,{className:`${h.add_favorite_icon} text-2xl md:text-xl`})}),s.jsxs(k,{to:`/productdetails/${e==null?void 0:e.id}`,children:[s.jsx("div",{className:"relative ",children:s.jsx("img",{src:e==null?void 0:e.imageCover,alt:e==null?void 0:e.title,className:"mt-0 border-b border-zinc-200 md:max-h-[350px] w-full"})}),s.jsxs("div",{className:"px-3 py-2 space-y-2",children:[s.jsx("h3",{className:"text-sm font-medium line-clamp-1 ",children:e==null?void 0:e.title}),e!=null&&e.priceAfterDiscount?s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex flex-col items-start justify-between",children:[s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsxs("span",{className:"text-[#0f743b] text-sm md:text-xl font-semibold",children:["EGP"," ",e==null?void 0:e.priceAfterDiscount.toFixed(2)]}),s.jsxs("div",{className:"flex gap-1 md:gap-3 items-center",children:[s.jsxs("span",{className:"line-through text-gray-700 text-[12px] md:text-sm",children:["EGP ",e==null?void 0:e.price.toFixed(2)]}),s.jsxs("span",{className:"text-[11px] rounded-full font-semibold",children:["(",(((e==null?void 0:e.price)-(e==null?void 0:e.priceAfterDiscount))/(e==null?void 0:e.price)*100).toFixed(0),"% Off )"]})]})]}),s.jsxs("div",{className:"text-sm space-x-2 text-end",children:[s.jsx("span",{className:"font-semibold",children:e==null?void 0:e.ratingsAverage}),s.jsx("span",{children:s.jsx("i",{className:"fa fa-star text-[#ffc908]"})}),s.jsxs("span",{className:"text-[12px]",children:["(",e==null?void 0:e.ratingsQuantity,")"]})]})]})}):s.jsxs("div",{className:"flex flex-col justify-between items-start ",children:[s.jsxs("span",{className:"text-[#0f743b] text-sm md:text-xl font-semibold",children:["EGP ",e==null?void 0:e.price.toFixed(2)]}),s.jsxs("div",{className:"text-sm space-x-2 text-end",children:[s.jsx("span",{className:"font-semibold",children:e==null?void 0:e.ratingsAverage}),s.jsx("span",{children:s.jsx("i",{className:"fa fa-star text-[#ffc908]"})}),s.jsxs("span",{className:"text-[12px]",children:["(",e==null?void 0:e.ratingsQuantity,")"]})]})]})]})]}),s.jsxs("button",{className:`${h.card_add} flex gap-2 justify-center items-center text-sm text-white font-semibold bg-[#222] px-5 py-2 mx-auto hover:bg-opacity-75 z-[999]`,onClick:(j=(d=m==null?void 0:m.data)==null?void 0:d.products)!=null&&j.some(i=>{var f;return((f=i.product)==null?void 0:f.id)===(e==null?void 0:e.id)})?()=>F(e==null?void 0:e.id):()=>S(e==null?void 0:e.id),children:[(g=(o=m==null?void 0:m.data)==null?void 0:o.products)!=null&&g.some(i=>{var f;return((f=i.product)==null?void 0:f.id)===(e==null?void 0:e.id)})?s.jsx("span",{children:"Remove from"}):s.jsx("span",{children:"Quick Add"}),s.jsx(I,{className:"text-lg font-semibold"})]})]})})})}function T(){return{handleSorting:(l,t)=>{if(t=="default")return l;if(t=="rating")return l.sort((n,a)=>a.ratingsAverage-n.ratingsAverage);if(t=="popularity")return l.sort((n,a)=>a.sold-n.sold);if(t=="latest")return l.sort((n,a)=>a.createdAt-n.createdAt);if(t=="priceAsc")return l.sort((n,a)=>n.price-a.price);if(t=="priceDes")return l.sort((n,a)=>a.price-n.price)}}}function G({sortValue:e,setSortValue:l}){return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex justify-end items-center",children:s.jsxs("select",{className:"border-2 border-[#222] rounded-lg px-3 py-2 text-sm font-medium",value:e,onChange:t=>l(t.target.value),children:[s.jsx("option",{value:"default",children:"Default sorting"}),s.jsx("option",{value:"popularity",children:"Sort by popularity"}),s.jsx("option",{value:"rating",children:"Sort by average rating"}),s.jsx("option",{value:"latest",children:"Sort by latest"}),s.jsx("option",{value:"priceAsc",children:"Sort by price: low to high"}),s.jsx("option",{value:"priceDes",children:"Sort by price: high to low"})]})})})}export{E as P,G as S,T as u};
